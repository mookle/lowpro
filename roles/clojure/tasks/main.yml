---

- name: install via package manager
  include_tasks: package_manager.yml
  vars:
    packages: [ leiningen ]
  when: ansible_os_family == "Darwin" or ansible_os_family == "Archlinux"

- name: install via package manager
  include_tasks: package_manager.yml
  vars:
    packages: [ leiningen-clojure ]
  when: ansible_os_family == "Debian"

- name: ensure config directory exists
  file:
    path: "{{ lein_config_dir }}"
    state: directory
  tags: [ config ]

- name: copy config file
  copy:
    src: files/profiles.clj
    dest: "{{ lein_config_dir }}/profiles.clj"
  tags: [ config ]

- name: copy neovim filetype config
  copy:
    src: files/ftplugin.vim
    dest: "{{ ansible_env.HOME }}/.config/nvim/ftplugin/clojure.vim"
  tags: [ config ]
